services:
    tom_atom.twig.atom_extension:
        class: TomAtom\AtomBundle\Twig\TomAtomExtension
        tags:
            - { name: twig.extension }
        arguments:
            - "@doctrine.orm.entity_manager.abstract"
            - "@security.authorization_checker"
            - "@kernel"
            - "@tom_atom.service.node_helper"
#    tom_atom.twig.node_visitor:
#        class: TomAtom\AtomBundle\Twig\AtomNodeVisitor
#        arguments:
#            - "@tom_atom.service.node_helper"
    tom_atom.service.node_helper:
        class: TomAtom\AtomBundle\Services\NodeHelper
        arguments:
            $entityManager: "@doctrine.orm.entity_manager.abstract"
            $authorizationChecker: "@security.authorization_checker"
            $kernelInterface: "@kernel"
            $parameterBag: "@parameter_bag"
            $cache: "@cache.app"

    TomAtom\AtomBundle\Controller\:
        calls:
            - setContainer: [ '@service_container' ]
        resource: '../../Controller'
        tags: [ 'controller.service_arguments' ]
        arguments:
            $cache: "@cache.app"
            $authorizationChecker: '@security.authorization_checker'
            $parameterBag: '@parameter_bag'

    tom_atom.service.atom_runtime:
        class: TomAtom\AtomBundle\Services\AtomRuntime
        tags: [ 'twig.runtime' ]
        arguments:
            $requestStack: '@request_stack'